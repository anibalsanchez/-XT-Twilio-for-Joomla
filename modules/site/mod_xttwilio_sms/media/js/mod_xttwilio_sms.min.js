"use strict";document.addEventListener("DOMContentLoaded",function(){var t=function(e,t,n,i,s){if(e.preventDefault(),t.value.length&&n.value.length&&i.value.length&&s.isValidNumber()){var o,a,d,u,r=s.getNumber(intlTelInputUtils.numberFormat.E164);(o=n.value,a=r,d=t.value,u=new URLSearchParams,u.append("message",d),u.append("first-name",o),u.append("phone-number-from",a),fetch("index.php?option=com_ajax&plugin=xttwilio&task=sendsms&format=json",{body:u,method:"POST"})).then(function(e){return e.json()}).then(function(e){e.success?alert("Message sent."):(alert(e.message),console.log(e))})}},n=function(e,t,n){n.isValidNumber()?(t.classList.remove("invalid"),t.classList.add("valid")):(t.classList.remove("valid"),t.classList.add("invalid"))},i=document.getElementById("xttwiliosms-message"),s=document.getElementById("xttwiliosms-firstname"),o=document.getElementById("xttwiliosms-phone"),e=document.getElementById("xttwiliosms-button"),a=window.intlTelInput(o,{utilsScript:"/media/lib_xttwilio/intl-tel-input/js/utils.js"});o.addEventListener("countrychange",o,function(e){return n(0,o,a)}),o.addEventListener("open:countrydropdown",o,function(e){return n(0,o,a)}),o.addEventListener("close:countrydropdown",o,function(e){return n(0,o,a)}),o.addEventListener("focus",o,function(e){return n(0,o,a)}),o.addEventListener("keyup",function(e){return n(0,o,a)}),e.addEventListener("click",function(e){return t(e,i,s,o,a)})});
